# Function Call 面试常考题总结

## 1. 为什么需要 Function Call?

Function Call 是实现代码模块化、可重用性和组织性的关键。它们允许程序员将复杂问题拆分成更小、可管理的部分。

## 2. 什么是 Function Call?

Function Call 是程序调用函数以执行该函数内部定义的特定任务的方法。
提供了大模型与外部系统交互的能力，类似于给大模型安装了一个外挂工具箱。当大模型遇到自己无法回答的问题，就会调用预设的函数（天气，访问数据库etc)

## 3. 如何让大型模型具备 Function Call 能力?

主要通过监督微调 supervised fine-tuning, 而不是在预训练的时候就从零开始专门训练。

## 4. 大模型的 Function Call 能力的训练核心思想?

教会大模型两件事情：

1. 识别意图：理解大模型的请求是否需要借助外部工具来完成，而不是直接生成文本。
2. 参数提取与格式化：如果需要，正确从用户的请求中提取所需要的参数，并按照预设的（例如json）格式生成函数调用指令。

## 5. 大模型的 Function Call 能力的训练过程?

1. 数据集构建：最关键一步，构建一个包含function call场景的指令微调数据集，每条数据样本包含：
   * 用户输入：一个请求（含调用or not）
   * 可用函数/工具描述：一个结构化的描述，告知模型当前有哪些函数可用。每个函数的用途，所需参数及其类型和描述。
   * 期望的输出：如果需要调用函数，则指定一个格式的字符串。如果不需要，则直接输出问本回答。
2. 选择基础模型：LLM(Llama，Gpt,ChatGlm)
3. 格式化训练数据：将每条数据样本组合成模型可以理解的格式。通常是将用户输入和可用函数描述拼接起来作为模型的输入（prompt),将期望输出作为目标输出（json).
4. 进行微调：使用标准的SFT方法（全参数微调orPEFT like: LoRA)在准备好的数据集上训练模型。

## 6. 大模型的 Function Call 能力的训练难点?

难点包括处理 Function Call 中的模糊性、有效管理上下文切换，以及确保模型能够从训练数据中进行泛化。

* 数据集质量
* 函数描述的清晰度
* 负样本:防止模型过度触发函数调用

## 7. Function Call 怎么组织文本的格式呢?

Function Call 的文本组织可以遵循结构化格式，例如：

1. Function-Call 数据集 基本结构

   * 基本结构包括定义参数、返回类型和预期行为。
2. Function-Call 数据集 可用函数/工具描述区的格式

   * 包括明确的注释和映射，指导函数的使用和预期结果。
3. Function-Call 数据集 关键要素

   * 关键要素包括输入参数、输出定义和错误处理程序。
4. Function-Call 数据集 对话流程中的格式

   * 在对话流程中使用结构化框架规定函数的交互，有助于增强清晰度和执行准确性。

## 8. Function Call 怎么去调动一些工具，插件变成模型可以理解的方式?

探索促进 Function Call 的框架和工具，提升理解和执行的灵活性，使用标准化方法以确保清晰。

1. 标准化描述 (Standardized Description)
   * 标准化有助于不同模块之间的函数定义和使用一致性。
2. 执行对接 (Execution Bridging)
   * 这涉及弥合不同执行环境之间的差距，以便无缝执行 Function Call。

## 9. Function Call 工作原理？

Function Call 的工作原理基于堆栈和堆内存的概念，函数参数被推送到堆栈上，函数执行发生在此。

1. LLM收到用户的提示
2. LLM决定他需要的工具
3. 程序员实现过程以接受来自LLM的工具调用请求并准备函数调用
4. 函数调用带参数将传递给将处理实际执行的后端服务

## 10. Function Call 存在什么问题？

常见问题包括堆栈溢出、文档不清和参数传递错误，可能导致执行错误。成本高。
